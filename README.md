# Zero-Trust Control Plane (PoC)

[![codecov](https://codecov.io/gh/kamaljohnson/zero-trust-control-plane/graph/badge.svg?token=T0A6M30PG0)](https://codecov.io/gh/kamaljohnson/zero-trust-control-plane)

## Live Demo

**Try it out:**

- **Live Application**: [https://ztcp.projects.xborglabs.com](https://ztcp.projects.xborglabs.com)  
  Access the web dashboard to manage organizations, members, sessions, and policies.

- **Documentation**: [https://docs.ztcp.projects.xborglabs.com](https://docs.ztcp.projects.xborglabs.com)  
  Comprehensive documentation covering architecture, APIs, deployment, and more.

---

## Overview

A proof-of-concept **zero-trust session and policy control plane** designed to demonstrate continuous authorization, centralized policy enforcement, **comprehensive auditability**, and real-time session revocation across multiple client types.

This project focuses on the **control-plane architecture** behind enterprise security systems (such as enterprise browsers and secure access platforms), rather than client-side enforcement or UI complexity.

---

## Features

- **Zero-trust access model** — Every client action is explicitly authorized
- **Centralized session management** — Heartbeat validation and instant revocation
- **Org admin dashboard** — Web interface for managing members, audit logs, and policy configuration (five sections); session revocation invalidates tokens and logs out revoked sessions
- **Centralized policy configuration** — Per-org policies (Auth & MFA, Device Trust, Session Management, Access Control, Action Restrictions) with sync to org MFA settings
- **Policy-driven authorization** — Stateless policy evaluation on the backend using OPA/Rego
- **Multi-tenant isolation** — Complete isolation across users, devices, sessions, and policies
- **Structured audit trails** — Comprehensive logging of authorization decisions and session events
- **Backend-first design** — All clients treated as untrusted; authorization decisions made server-side

---

## Architecture

- **Backend (Go)** — Stateless gRPC control plane providing authentication (optional; requires DB and JWT keys), session management, policy evaluation, and audit. Auth and database are enabled only when configured; see [backend/README.md](backend/README.md).
- **Web Client (Next.js)** — Thin, session-aware client that requests actions and reflects backend authorization decisions

All authorization decisions and audit events are generated by the backend; clients only request actions and react to outcomes.

---

## Getting Started

### Prerequisites

- **Docker** and **Docker Compose** (v2 or later)
- **Go** 1.25+ (for backend)
- **Node.js** 20+ (for frontend and docs)

### Quick Start

1. **Clone the repository**
   ```bash
   git clone https://github.com/kamaljohnson/zero-trust-control-plane.git
   cd zero-trust-control-plane
   ```

2. **Run the full stack**
   ```bash
   make setup
   ```

3. **Start services** (in separate terminals)
   ```bash
   make run-backend    # Terminal 1
   make run-frontend   # Terminal 2
   ```

4. **Access the application**
   - Frontend: http://localhost:3000
   - Backend gRPC: localhost:8080
   - Documentation: http://localhost:3001 (run `make run-docs`)

For detailed setup instructions, see [deploy/README.md](deploy/README.md).

---

## Repository Structure

- **backend/** — Go gRPC API server; authentication, session management, policy, and audit (including login/logout and session events). See [backend/README.md](backend/README.md). Auth and database are optional (enabled when `DATABASE_URL` and both JWT keys are set); see the [documentation](#documentation) for details.
- **frontend/** — Next.js web client; session-aware, reflects backend authorization. See [frontend/README.md](frontend/README.md).
- **docs-site/** — Docusaurus documentation site. See [docs-site/README.md](docs-site/README.md).
- **deploy/** — Docker Compose configurations and deployment scripts. See [deploy/README.md](deploy/README.md).

---

## Documentation

**Live Documentation**: [https://docs.ztcp.projects.xborglabs.com](https://docs.ztcp.projects.xborglabs.com)

The Docusaurus documentation site is the primary and most comprehensive source of documentation for this project.

### Local Documentation

To view the documentation locally:

```bash
cd docs-site
npm install
npm run start
```

The docs site will be available at http://localhost:3001 (default port).

### What's Covered

The documentation includes:

- **Backend**: Authentication, sessions, session lifecycle, org policy configuration, policy engine, database schema and migrations, audit logging, device trust, MFA, health checks, and testing
- **Frontend**: Architecture, dashboard (org admin), and user browser
- **Operations**: Deployment guides and production setup
- **Contributing**: Guidelines and pending work

### Quick Reference

- **[backend/README.md](backend/README.md)** — Backend layout, configuration, code generation, and run instructions
- **[frontend/README.md](frontend/README.md)** — Web client setup and run
- **[deploy/README.md](deploy/README.md)** — Local and production deployment guides

---

## What This Project Is Not

- Not a full enterprise browser implementation
- Not a hardened endpoint security solution
- Not a production-ready compliance platform

Security guarantees are modeled logically to validate system design, observability, and control-plane semantics.

---

## Intended Audience

This project is intended as:

- A **systems design and architecture demonstration**
- A **senior backend / platform engineering portfolio**
- A reference for **zero-trust, policy enforcement, and auditability concepts**