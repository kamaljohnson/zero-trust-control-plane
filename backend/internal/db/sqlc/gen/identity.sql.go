// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: identity.sql

package gen

import (
	"context"
	"database/sql"
	"time"
)

const createIdentity = `-- name: CreateIdentity :one
INSERT INTO identities (id, user_id, provider, provider_id, password_hash, created_at)
VALUES ($1, $2, $3, $4, $5, $6)
RETURNING id, user_id, provider, provider_id, password_hash, created_at
`

type CreateIdentityParams struct {
	ID           string
	UserID       string
	Provider     IdentityProvider
	ProviderID   string
	PasswordHash sql.NullString
	CreatedAt    time.Time
}

func (q *Queries) CreateIdentity(ctx context.Context, arg CreateIdentityParams) (Identity, error) {
	row := q.db.QueryRowContext(ctx, createIdentity,
		arg.ID,
		arg.UserID,
		arg.Provider,
		arg.ProviderID,
		arg.PasswordHash,
		arg.CreatedAt,
	)
	var i Identity
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Provider,
		&i.ProviderID,
		&i.PasswordHash,
		&i.CreatedAt,
	)
	return i, err
}

const getIdentity = `-- name: GetIdentity :one
SELECT id, user_id, provider, provider_id, password_hash, created_at
FROM identities
WHERE id = $1
`

func (q *Queries) GetIdentity(ctx context.Context, id string) (Identity, error) {
	row := q.db.QueryRowContext(ctx, getIdentity, id)
	var i Identity
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Provider,
		&i.ProviderID,
		&i.PasswordHash,
		&i.CreatedAt,
	)
	return i, err
}

const getIdentityByUserAndProvider = `-- name: GetIdentityByUserAndProvider :one
SELECT id, user_id, provider, provider_id, password_hash, created_at
FROM identities
WHERE user_id = $1 AND provider = $2
`

type GetIdentityByUserAndProviderParams struct {
	UserID   string
	Provider IdentityProvider
}

func (q *Queries) GetIdentityByUserAndProvider(ctx context.Context, arg GetIdentityByUserAndProviderParams) (Identity, error) {
	row := q.db.QueryRowContext(ctx, getIdentityByUserAndProvider, arg.UserID, arg.Provider)
	var i Identity
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Provider,
		&i.ProviderID,
		&i.PasswordHash,
		&i.CreatedAt,
	)
	return i, err
}

const getIdentityByUserAndProviderID = `-- name: GetIdentityByUserAndProviderID :one
SELECT id, user_id, provider, provider_id, password_hash, created_at
FROM identities
WHERE user_id = $1 AND provider = $2 AND provider_id = $3
`

type GetIdentityByUserAndProviderIDParams struct {
	UserID     string
	Provider   IdentityProvider
	ProviderID string
}

func (q *Queries) GetIdentityByUserAndProviderID(ctx context.Context, arg GetIdentityByUserAndProviderIDParams) (Identity, error) {
	row := q.db.QueryRowContext(ctx, getIdentityByUserAndProviderID, arg.UserID, arg.Provider, arg.ProviderID)
	var i Identity
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Provider,
		&i.ProviderID,
		&i.PasswordHash,
		&i.CreatedAt,
	)
	return i, err
}

const updateIdentityPasswordHash = `-- name: UpdateIdentityPasswordHash :one
UPDATE identities
SET password_hash = $2
WHERE id = $1
RETURNING id, user_id, provider, provider_id, password_hash, created_at
`

type UpdateIdentityPasswordHashParams struct {
	ID           string
	PasswordHash sql.NullString
}

func (q *Queries) UpdateIdentityPasswordHash(ctx context.Context, arg UpdateIdentityPasswordHashParams) (Identity, error) {
	row := q.db.QueryRowContext(ctx, updateIdentityPasswordHash, arg.ID, arg.PasswordHash)
	var i Identity
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Provider,
		&i.ProviderID,
		&i.PasswordHash,
		&i.CreatedAt,
	)
	return i, err
}
